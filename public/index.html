<!DOCTYPE html>

<!--
/*
 * Streetmix
 *
 * Front-end (mostly) by Marcin Wichary, Code for America fellow in 2013.
 *
 * Note: This code is really gnarly. It’s been done under a lot of time 
 * pressure and there’s a lot of shortcut and tech debt. 
 * 
 * We are planning to work on this much more, but probably no sooner than
 * March in the earnest.
 */
-->
<html lang='en'>
<head>
  <title>Streetmix</title>
  
  <meta charset='utf-8'>
  <meta http-equiv='Content-Language' content='en'>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="transparent">

  <link href='/css/styles.css' rel='stylesheet' type='text/css'>

  <script src='/js/modernizr.js'></script>
  <script src='/js/moment.js'></script>
  <script src='/js/jquery-1.9.1.min.js'></script>
  <script src='/js/jquery.cookie.js'></script>

  <script src='/js/scripts.js'></script>
  <script>
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-38087461-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>

  <script src='//platform.twitter.com/widgets.js'></script>
</head>

<body tabindex='1'>
  <div id='debug'><textarea></textarea></div>
  <div id='loading'><div>Loading…</div></div>

  <div id='gallery'>
    <ul class='streets'>
    </ul>
  </div>

  <div id='main-screen'>
    <div id='gallery-shield'></div>

    <div id='error'>
      <div>
        <h1></h1>
        <div class='description'></div>
      </div>
    </div>

    <div id='blocking-shield'>
      <div>
        <div class='message'></div>
        <div class='try-again'>
          Streetmix is having issues accessing Internet.
          <br>
          <button id='blocking-shield-try-again'>Try again</button>
          <button id='blocking-shield-cancel'>Cancel</button>
        </div>
      </div>
    </div>

    <nav id='menu'>
      <ul>
        <li id='identity'>
        <li>
          <span id='sign-in-link'></span>
        <li id='gallery-link'>
          <button id='gallery-button'>My streets</button>
        <li>
          <a target='_blank' href='/new'>New street</a>
        <li>
          <button id='share-menu-button'>Share</button>
        <li>
          <button id='feedback-menu-button'>Feedback</button>
      </ul>
    </nav>

    <div id='identity-menu' class='menu'>
      <a id='sign-out-link' href='#'>Sign out</a>
    </div>

    <div id='feedback-menu' class='menu'>
      <a id='feedback-via-twitter' href='#' target='_blank'>Send a tweet to @streetmixapp</a>
      <a href='mailto:streetmix@codeforamerica.org' target='_blank'>Send an email to Streetmix team</a>
    </div>

    <div id='share-menu' class='menu'>
      <div id='sign-in-promo'>
        <a href='/twitter-sign-in?redirectUri=/just-signed-in'>Sign in with Twitter</a> for nicer
        links to your streets and your personal street gallery 
      </div>
      <div id='share-via-link-canvas'>
        Copy and paste this link to share:
        <input id='share-via-link' type='text' value=''>
      </div>
      <a id='share-via-twitter' href='#' target='_blank'>Share using Twitter</a>
      <a id='share-via-facebook' href='#'>Share using Facebook</a>
    </div>

    <header>
      <div class='inside'>

        <canvas id='width-chart'></canvas>

        <div id='street-width-canvas'>
          <!-- <select id='street-width'></select> -->
        </div>
      </div>
    </header>

    <div id='status-message'><div></div></div>

    <div id='no-connection-message'>
      <div>
        Streetmix is having trouble connecting to the Internet.
        <button id='no-connection-try-again'>Try again</button>
      </div> 
    </div>

    <div id='info-bubble'></div>

    <div id='street-name-canvas'>
      <div id='street-name'><div></div></div>
      <div id='street-attribution'></div>
    </div>

    <div id='new-street-menu'>
      <ul>
        <li>
          <input type='radio' name='new-street' id='new-street-default'><label for='new-street-default'>Start with an example street</label>
        <li>
          <input type='radio' name='new-street' id='new-street-empty'><label for='new-street-empty'>Start with an empty street</label>
        <li>
          <input type='radio' name='new-street' id='new-street-last'><label for='new-street-last'>Start with a copy of last street</label>
      </ul>
    </div>

    <section id='street-section'>
      <section id='street-section-canvas'>
        <section id='street-section-left-building'></section>
        <section id='street-section-right-building'></section>
        <div id='editable-street-section'></div>
      </section>
      <section id='street-section-sky'>
        <div class='rear-clouds'></div>
        <div class='front-clouds'></div>
      </section>
      <section id='street-section-dirt'></section>
    </section>

    <footer>
      <div id='commands'>
        <button id='undo'>Undo</button>
        <button id='redo'>Redo</button>

        <div class='street-width'>
          Street width: <select id='street-width'></select>
        </div>
      </div>

      <div id='palette'>
        <div id='trashcan'>Drag here to remove</div>
      </div>
    </footer>
  </div>

  <div id='what-is-this-content' style='display: none'>
    <p>
      <img style='width: 480px; height: 60px; margin: 12px 0; margin-left: -8px' src='/images/ui/title-dark.png'>
    </p>
    <p>
    <strong>Streetmix</strong> is an interactive 
    <a href="https://github.com/codeforamerica/streetmix#what-are-street-sections">street section</a> builder,
      put together by a group of 
      2013 <a href='http://www.codeforamerica.org'>Code for America</a> fellows.
    </p>
    <p>
      This app is a work in progress, and in a very early stage. Stay tuned 
      and send us your thoughts!
    </p>
    <p>
      <a href='https://github.com/codeforamerica/streetmix#readme'>More information</a>
      ·
      <a href='http://www.theatlanticcities.com/commute/2013/01/digital-mixing-board-your-street/4555/'><em>The Atlantic Cities</em> write-up</a>
    <br>
      <a href='mailto:streetmix@codeforamerica.org'>Contact via email</a>
      ·
      <a href='http://twitter.com/streetmixapp'>Contact via Twitter</a>
    <br>
      <a href='https://github.com/codeforamerica/streetmix'>View source code</a>
      ·
      <a href='https://github.com/codeforamerica/streetmix/issues'>File a bug/suggestion</a>
    </p>
  </div>
  <script src='/js/what-is-this.js'></script>

  <script>
    main.init();
  </script>
</body>
</html>
